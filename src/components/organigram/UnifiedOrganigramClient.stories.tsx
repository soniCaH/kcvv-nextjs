import type { Meta, StoryObj } from "@storybook/nextjs-vite";
import { UnifiedOrganigramClient } from "./UnifiedOrganigramClient";
import { clubStructure } from "@/data/club-structure";

/**
 * UnifiedOrganigramClient - Tabbed interface for organigram views
 *
 * Combines three views into a single unified interface:
 * - Card Hierarchy: Collapsible card-based hierarchy view
 * - Diagram: Interactive D3-based organizational chart
 * - Responsibilities: Help system to find the right contact person
 *
 * Features:
 * - View toggle with localStorage persistence
 * - Responsive defaults (mobile → cards, desktop → chart)
 * - Shared state across all views
 * - Member details modal
 */
const meta = {
  title: "Organigram/UnifiedOrganigram",
  component: UnifiedOrganigramClient,
  parameters: {
    layout: "fullscreen",
    nextjs: {
      navigation: {
        pathname: "/club/organigram",
      },
    },
    docs: {
      description: {
        component:
          "Unified organigram interface with three view modes: Card Hierarchy, Interactive Chart, and Responsibility Finder. View preference is saved to localStorage and restored on next visit.",
      },
    },
  },
  tags: ["autodocs"],
} satisfies Meta<typeof UnifiedOrganigramClient>;

export default meta;
type Story = StoryObj<typeof meta>;

/**
 * Default view with full club structure.
 * On first load, mobile devices show cards view, desktop shows chart view.
 * View preference is saved to localStorage.
 */
export const Default: Story = {
  args: {
    members: clubStructure,
  },
};

/**
 * Minimal example with just a few members for testing.
 * Useful for quick verification of layout and interactions.
 */
export const MinimalStructure: Story = {
  args: {
    members: clubStructure.slice(0, 5),
  },
};

/**
 * Empty state - no members.
 * Shows how the component handles empty data.
 */
export const EmptyState: Story = {
  args: {
    members: [],
  },
};

/**
 * Single department view - only hoofdbestuur (main board).
 * Tests filtering behavior with subset of data.
 */
export const HoofdbestuurOnly: Story = {
  args: {
    members: clubStructure.filter(
      (m) => m.department === "hoofdbestuur" || m.department === "general",
    ),
  },
};

/**
 * Single department view - only jeugdbestuur (youth board).
 * Tests filtering behavior with subset of data.
 */
export const JeugdbestuurOnly: Story = {
  args: {
    members: clubStructure.filter((m) => m.department === "jeugdbestuur"),
  },
};
